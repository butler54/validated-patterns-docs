---
menu:
  learn:
    parent: Patterns quick start
title: Configuring secrets
aliases: /infrastructure/using-validated-pattern-operator/
weight: 21
---

:toc:
:imagesdir: /images
:_content-type: ASSEMBLY
include::modules/comm-attributes.adoc[]

== What are secrets

Secrets refer to any piece of sensitive information that should not be exposed publicly or handled insecurely. This can include passwords, private keys, certificates (particularly the private parts), database connection strings, and other confidential data.

A simple way to think of secrets is as anything that security teams or responsible system administrators would ensure stays protected and not published in a public space.

Secrets are crucial for the functioning of applications for example database passwords or cache keys. Without access to these secrets, applications may fail or operate in a significantly impaired manner.

Secrets often vary between different deployments of the same application for example separate load balancer certificates for different instances. Using the same secret across multiple deployments is generally discouraged as it increases the risk of exposure

Applications often need secrets to run correctly, making them indispensable. Removing or mishandling secrets can disrupt operations.

== How Validated Patterns implements secrets management

Validated Patterns supports the tokenization approach for secret management. Tokenization involves keeping actual secret values out of version control (for example git) by using tokens or references that can pull secrets from secure storage during runtime. The real secrets are pulled from an external storage system at runtime.

This approach requires integration with external secret management systems some examples of which are HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, and CyberArk's Conjur.

The External Secrets Operator (ESO) is integral to the validated patterns framework, enabling secure secret management by fetching secrets from various secret stores and projecting them into Kubernetes namespaces. ESO supports integration with providers such as HashiCorp Vault, AWS Secrets Manager, Azure Key Vault, GCP, IBM Secrets Manager, and others.

ESO 

* Supports a range of secret providers, ensuring no vendor lock-in. 
* Keeps secrets out of version-controlled repositories, using token references in Git instead.
* Allows teams to manage secrets securely while maintaining efficient Git workflows.

[NOTE]
====
As of December 12, 2023, ESO is not officially supported by Red Hat as a product.
====

ESO's custom file format and utilities streamlines secret management by allowing file references and supporting encrypted secret storage. The design prioritizes security through multi-layer encryption and simplifies key management. In particular the ini key type is especially helpful for handling AWS credentials, where mismanagement could lead to unauthorized use and potential financial or operational issues. 

Validated Patterns primary backend secret store is HashiCorp Vault It acts as a centralized service for securely managing secrets, such as passwords, API keys, and certificates. 

Unlike other secret management systems tied to specific cloud providers for example AWS Secrets Manager or Azure Key Vault, Vault can be deployed across different clouds, on bare-metal systems, and in hybrid environments. This cross-platform support made it a popular and practical choice for maintaining a consistent secrets management strategy.

== Configuring Secrets

Secret management in validated patterns follows GitOps best practices while maintaining security. Here's how to configure your secrets:

=== Using Vault for Secret Management

. Access the Vault instance deployed by the pattern
. Initialize Vault and obtain root tokens
. Configure secret engines:
+
[source,bash]
----
vault secrets enable -path=secret kv-v2
----

=== Storing Pattern Secrets

. Create a new secret:
+
[source,bash]
----
vault kv put secret/pattern-name/credentials \
  username="admin" \
  password="secure-password"
----

. Reference secrets in your GitOps configurations:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: pattern-secret
stringData:
  credentials: ${vault:secret/data/pattern-name/credentials}
----

[TIP]
====
For more detailed information about secret management, refer to the comprehensive guide at https://validatedpatterns.io/learn/
====

== Next Steps

* Explore the deployed components in your OpenShift console
* Review the GitOps repositories created by the pattern
* Try modifying the configuration to understand the GitOps workflow
* Consider exploring other validated patterns that build on this foundation

[IMPORTANT]
====
Remember to consult the official documentation at validatedpatterns.io for detailed information about specific features and advanced configurations.
====